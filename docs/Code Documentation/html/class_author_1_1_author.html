<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Neo4j Database Creation: Author.Author Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Neo4j Database Creation<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">The goal of this project is to pull information from the OpenAlex public API and upload that information into Neo4j in order to create a database of authors, institutions, and works related to Georgia Tech.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Author</b></li><li class="navelem"><a class="el" href="class_author_1_1_author.html">Author</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_author_1_1_author-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Author.Author Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaf2592b07a6b601a495547b30653dbce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#aaf2592b07a6b601a495547b30653dbce">remove_duplicate_authors_and_collabs</a> ()</td></tr>
<tr class="separator:aaf2592b07a6b601a495547b30653dbce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125ca309eae2eedfdecc41ed4d98a04e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#a125ca309eae2eedfdecc41ed4d98a04e">upload_current_gt_authors</a> (url, username, password, database)</td></tr>
<tr class="separator:a125ca309eae2eedfdecc41ed4d98a04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41be66c118e5f1233c7e23560e2795e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#a41be66c118e5f1233c7e23560e2795e5">upload_collabs_parallel</a> (batch_number, url, username, password, database, batch_size=8000)</td></tr>
<tr class="separator:a41be66c118e5f1233c7e23560e2795e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1081c035e891b1ab2ce93f14c3ad55d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#ab1081c035e891b1ab2ce93f14c3ad55d">get_max_batch_number</a> (batch_size=8000)</td></tr>
<tr class="separator:ab1081c035e891b1ab2ce93f14c3ad55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a000724fe9b81e3e8ba62cf4de6e91974"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#a000724fe9b81e3e8ba62cf4de6e91974">test_no_duplicates_in_author_and_collab</a> ()</td></tr>
<tr class="separator:a000724fe9b81e3e8ba62cf4de6e91974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa5785de702f8cc1cdffc88d50ecdc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#a8aa5785de702f8cc1cdffc88d50ecdc2">check_no_lost_collabs</a> ()</td></tr>
<tr class="separator:a8aa5785de702f8cc1cdffc88d50ecdc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e3f51a2aa92043a9932219c9b5ef44"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_author_1_1_author.html#ae0e3f51a2aa92043a9932219c9b5ef44">run_method</a> (arguments)</td></tr>
<tr class="separator:ae0e3f51a2aa92043a9932219c9b5ef44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A class to hold various methods relating to authors.

Imports
-------
Uses the File and Database classes from this project
json
sys

Methods
-------
remove_duplicate_authors_and_collabs():
    Removes any duplicated authors and collaborators from the author and collab json files
    Merges authors which appear in both files so that only one node will be created
upload_current_gt_authors(url, username, password, database):
    Uploads authors within the author json file
upload_collabs_parallel(batch_number, url, username, password, database, batch_size=8000):
    Uploads collabs within the collab json file, set up to make use of a slurm array job
get_max_batch_number(batch_size=8000):
    Prints the length of the array used when uploading the collabs in parallel
    Use to determing correct size of array for an array job
    Prints the result to output file
test_no_duplicates_in_author_and_collab():
    A test to determine if there are any authors which appear both as an author and a collab,
    meaning they were not propery merged
    Prints the result to output file
check_no_lost_collabs():
    A test to determine if every collab in the original collab json is also in the edited version
    Prints the result to output file
run_method(arguments):
    Used to run any method in the class to easily access methods in an sbatch file
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8aa5785de702f8cc1cdffc88d50ecdc2" name="a8aa5785de702f8cc1cdffc88d50ecdc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa5785de702f8cc1cdffc88d50ecdc2">&#9670;&#160;</a></span>check_no_lost_collabs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.check_no_lost_collabs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A test to determine if every collab in the original collab json is also in the edited version
Prints the result to output file

Requirements
------------
openalex_collab_dump.json
openalex_collab_dump_edit.json

Parameters
----------
None

Returns
-------
None
</pre> 
</div>
</div>
<a id="ab1081c035e891b1ab2ce93f14c3ad55d" name="ab1081c035e891b1ab2ce93f14c3ad55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1081c035e891b1ab2ce93f14c3ad55d">&#9670;&#160;</a></span>get_max_batch_number()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.get_max_batch_number </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_size</em> = <code>8000</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prints the length of the array used when uploading the collabs in parallel
Use to determine correct size of array for an array job
Prints the result to output file

Requirements
------------
openalex_collab_dump_edit.json

Parameters
----------
batch_size: int (optional)
    Represents the size of each batch, the number of nodes to be uploaded in each sub-job
    If the size is too large, Neo4j will run out of memory and the upload will not complete

Returns
-------
None
</pre> 
</div>
</div>
<a id="aaf2592b07a6b601a495547b30653dbce" name="aaf2592b07a6b601a495547b30653dbce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf2592b07a6b601a495547b30653dbce">&#9670;&#160;</a></span>remove_duplicate_authors_and_collabs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.remove_duplicate_authors_and_collabs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Removes any duplicated authors and collaborators from the author and collab json files
Merges authors which appear in both files so that only one node will be created
When merging nodes, combines the past institution lists to capture all institutions an author
worked at
Does not include GT in a current GT author's past institutions, as this will be represented
through a WORKING_AT relationship

Requirements
------------
openalex_author_dump.json
openalex_collab_dump.json
openalex_work_dump.json
openalex_institution_dump.json

Parameters
----------
None

Returns
-------
None</pre> 
</div>
</div>
<a id="ae0e3f51a2aa92043a9932219c9b5ef44" name="ae0e3f51a2aa92043a9932219c9b5ef44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e3f51a2aa92043a9932219c9b5ef44">&#9670;&#160;</a></span>run_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.run_method </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arguments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Used to run any method in the class to easily access methods in an sbatch file

Requirements
------------
None

Parameters
----------
arguments: list
    List of methods to execute
    ex. ['Author.check_no_lost_collabs()']

Returns
-------
None
</pre> 
</div>
</div>
<a id="a000724fe9b81e3e8ba62cf4de6e91974" name="a000724fe9b81e3e8ba62cf4de6e91974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a000724fe9b81e3e8ba62cf4de6e91974">&#9670;&#160;</a></span>test_no_duplicates_in_author_and_collab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.test_no_duplicates_in_author_and_collab </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A test to determine if there are any authors which appear both as an author and a collab,
meaning they were not propery merged
Prints the result to output file

Requirements
------------
openalex_author_dump_edit.json
openalex_collab_dump_edit.json

Parameters
----------
None

Returns
-------
None
</pre> 
</div>
</div>
<a id="a41be66c118e5f1233c7e23560e2795e5" name="a41be66c118e5f1233c7e23560e2795e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41be66c118e5f1233c7e23560e2795e5">&#9670;&#160;</a></span>upload_collabs_parallel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.upload_collabs_parallel </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_size</em> = <code>8000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Uploads collabs within the collab json file, set up to make use of a slurm array job
Adds the WORKED_AT relationship with past institutions

Requirements
------------
openalex_collab_dump_edit.json

Parameters
----------
batch_number: int
    Represents which batch to upload, based on batch_size
    with the default number for batch_size (8000): 
    A batch number of 0 uploads the first 8000, 1 the next 8000, etc 
url: str
    URL of the database to connect and upload the nodes to
username: str
    Username of Neo4j user
password: str
    Password of Neo4j user
database: str
    Specific database to upload to
batch_size: int (optional)
    Represents the size of each batch, the number of nodes to be uploaded in each sub-job
    If the size is too large, Neo4j will run out of memory and the upload will not complete
    Default value: 8000

Returns
-------
None
</pre> 
</div>
</div>
<a id="a125ca309eae2eedfdecc41ed4d98a04e" name="a125ca309eae2eedfdecc41ed4d98a04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a125ca309eae2eedfdecc41ed4d98a04e">&#9670;&#160;</a></span>upload_current_gt_authors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Author.Author.upload_current_gt_authors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>database</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Uploads authors within the author json file
Gives all current gt authors both the Author and GT label
Creates a WORKING_AT relationship with GT

Requirements
------------
openalex_author_dump_edit.json

Parameters
----------
url: str
    URL of the database to connect and upload the nodes to
username: str
    Username of Neo4j user
password: str
    Password of Neo4j user
database: str
    Specific database to upload to

Returns
-------
None
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Author.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
