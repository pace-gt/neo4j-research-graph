<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Neo4j Database Creation: Work.Work Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Neo4j Database Creation<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">The goal of this project is to pull information from the OpenAlex public API and upload that information into Neo4j in order to create a database of authors, institutions, and works related to Georgia Tech.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Work</b></li><li class="navelem"><a class="el" href="class_work_1_1_work.html">Work</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_work_1_1_work-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Work.Work Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0d95a3bf367a68d2b75df4e5ecc93b5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_1_1_work.html#a0d95a3bf367a68d2b75df4e5ecc93b5d">remove_duplicate_works</a> ()</td></tr>
<tr class="separator:a0d95a3bf367a68d2b75df4e5ecc93b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbcc75e932cd3d78e6ac20d5a796945d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_1_1_work.html#afbcc75e932cd3d78e6ac20d5a796945d">upload_works_parallel</a> (batch_number, url, username, password, database, batch_size=8000)</td></tr>
<tr class="separator:afbcc75e932cd3d78e6ac20d5a796945d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff67d93722c03f6dd69b7821d3537c3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_1_1_work.html#aff67d93722c03f6dd69b7821d3537c3d">get_max_batch_number</a> (batch_size=8000)</td></tr>
<tr class="separator:aff67d93722c03f6dd69b7821d3537c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57982851837b053a59b33b930ded4dbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_1_1_work.html#a57982851837b053a59b33b930ded4dbe">create_authored_relationship</a> (url, username, password, database)</td></tr>
<tr class="separator:a57982851837b053a59b33b930ded4dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9076ad8c2ee53d78b3fe981db1b43833"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_work_1_1_work.html#a9076ad8c2ee53d78b3fe981db1b43833">run_method</a> (arguments)</td></tr>
<tr class="separator:a9076ad8c2ee53d78b3fe981db1b43833"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A class to hold various methods relating to works

Imports
-------
Uses the File and Database classes from this project
json
sys

Methods
-------
remove_duplicate_works():
    Removes duplicate works and creates a new json file without the duplicates
upload_works_parallel(batch_number, url, username, password, database, batch_size=8000):
    Uploads works within the work json file, set up to make use of a slurm array job
get_max_batch_number(batch_size=8000):
    Prints the length of the array used when uploading the works in parallel
    Use to determing correct size of array for an array job
    Prints the result to output file
create_authored_relationship(url, username, password, database):
    Creates the authored relationship within the database
run_medthod(arguments):
    Used to run any method in the class to easily access methods in an sbatch file
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a57982851837b053a59b33b930ded4dbe" name="a57982851837b053a59b33b930ded4dbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57982851837b053a59b33b930ded4dbe">&#9670;&#160;</a></span>create_authored_relationship()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Work.Work.create_authored_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>database</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates the authored relationship within the database

Requirements
------------
None

Parameters
----------
url: str
    URL of the database to connect and upload the nodes to
username: str
    Username of Neo4j user
password: str
    Password of Neo4j user
database: str
    Specific database to upload to

Returns
-------
None
</pre> 
</div>
</div>
<a id="aff67d93722c03f6dd69b7821d3537c3d" name="aff67d93722c03f6dd69b7821d3537c3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff67d93722c03f6dd69b7821d3537c3d">&#9670;&#160;</a></span>get_max_batch_number()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Work.Work.get_max_batch_number </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_size</em> = <code>8000</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prints the length of the array used when uploading the works in parallel
Use to determine correct size of array for an array job
Prints the result to output file

Requirements
------------
openalex_work_dump_edit.json

Parameters
----------
batch_size: int (optional)
    Represents the size of each batch, the number of nodes to be uploaded in each sub-job
    If the size is too large, Neo4j will run out of memory and the upload will not complete

Returns
-------
None
</pre> 
</div>
</div>
<a id="a0d95a3bf367a68d2b75df4e5ecc93b5d" name="a0d95a3bf367a68d2b75df4e5ecc93b5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d95a3bf367a68d2b75df4e5ecc93b5d">&#9670;&#160;</a></span>remove_duplicate_works()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Work.Work.remove_duplicate_works </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Removes duplicate works and creates a new json file without the duplicates

Requirements
------------
openalex_work_dump.json

Parameters
----------
None

Returns
-------
None</pre> 
</div>
</div>
<a id="a9076ad8c2ee53d78b3fe981db1b43833" name="a9076ad8c2ee53d78b3fe981db1b43833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9076ad8c2ee53d78b3fe981db1b43833">&#9670;&#160;</a></span>run_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Work.Work.run_method </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arguments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Used to run any method in the class to easily access methods in an sbatch file

Requirements
------------
None

Parameters
----------
arguments: list
    List of methods to execute

Returns
-------
None
</pre> 
</div>
</div>
<a id="afbcc75e932cd3d78e6ac20d5a796945d" name="afbcc75e932cd3d78e6ac20d5a796945d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbcc75e932cd3d78e6ac20d5a796945d">&#9670;&#160;</a></span>upload_works_parallel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Work.Work.upload_works_parallel </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch_size</em> = <code>8000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Uploads works within the work json file, set up to make use of a slurm array job

Requirements
------------
openalex_work_dump_edit.json

Parameters
----------
batch_number: int
    Represents which batch to upload, based on batch_size
    with the default number for batch_size (8000): 
    A batch number of 0 uploads the first 8000, 1 the next 8000, etc 
url: str
    URL of the database to connect and upload the nodes to
username: str
    Username of Neo4j user
password: str
    Password of Neo4j user
database: str
    Specific database to upload to
batch_size: int (optional)
    Represents the size of each batch, the number of nodes to be uploaded in each sub-job
    If the size is too large, Neo4j will run out of memory and the upload will not complete
    Default value: 8000

Returns
-------
None
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Work.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
